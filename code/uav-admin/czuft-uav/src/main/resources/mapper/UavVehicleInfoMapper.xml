<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.uav.admin.mapper.UavVehicleInfoMapper">

    <resultMap type="VehicleInfo" id="UavVehicleInfoResult">
        <id property="vehicleInfoId"    column="vehicle_info_id"    />
        <result property="vehicleId"    column="vehicle_id"    />
        <result property="sysId"    column="sys_id"    />
        <result property="groundSpeed"    column="ground_speed"    />
        <result property="soc"    column="soc"    />
        <result property="lng"    column="lng"    />
        <result property="lat"    column="lat"    />
        <result property="alt"    column="alt"    />
        <result property="flyInAir"    column="fly_in_air"    />
        <result property="headAngle"    column="head_angle"    />
        <result property="gpsStatus"    column="gps_status"    />
        <result property="satCount"    column="satellite_count"    />
        <result property="mode"    column="mode"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="remark"    column="remark"    />
    </resultMap>

    <sql id="selectUavVehicleInfoVo">
        select vehicle_info_id, vehicle_id, sys_id, ground_speed, soc, lng, lat, alt, fly_in_air, head_angle, gps_status, satellite_count, mode, create_by, create_time, update_by, update_time, remark from uav_vehicle_info
    </sql>

    <select id="selectUavVehicleInfoList" parameterType="VehicleInfo" resultMap="UavVehicleInfoResult">
        <include refid="selectUavVehicleInfoVo"/>
        <where>
            <if test="sysId != null and sysId != ''"> and sys_id = #{sysId}</if>
        </where>
    </select>
    
    <select id="selectUavVehicleInfoByVehicleId" parameterType="Long" resultMap="UavVehicleInfoResult">
        <include refid="selectUavVehicleInfoVo"/>
        where vehicle_id = #{vehicleId}
        order by create_time desc limit 1
    </select>
</mapper>